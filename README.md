# Техническое задание  
## Проект: **Task Tracker** (Минимальный таск-трекер с календарём)

---

## 1. Цель проекта

Разработать минимальную систему управления задачами с календарём, позволяющую пользователям:

- проходить аутентификацию,
- создавать, просматривать и управлять своими задачами,
- привязывать задачи к конкретной дате и времени,
- видеть свои задачи в календарном виде.

**Важно**: каждый пользователь видит **только свои задачи**.

---

## 2. Структура данных (основные сущности и поля)

### Сущность: **User**

Представляет зарегистрированного пользователя.

| Поле           | Тип данных      | Описание                     |
|----------------|------------------|------------------------------|
| `id`           | Integer (PK)     | Уникальный идентификатор     |
| `username`     | String (unique)  | Уникальное имя пользователя  |
| `email`        | String (unique)  | Электронная почта            |
| `password_hash`| String           | Хэш пароля                   |

---

### Сущность: **Task**

Представляет задачу пользователя.

| Поле           | Тип данных      | Описание                                   |
|----------------|------------------|--------------------------------------------|
| `id`           | Integer (PK)     | Уникальный идентификатор задачи            |
| `title`        | String           | Краткое название задачи                    |
| `description`  | Text (опционально)| Подробное описание                        |
| `due_datetime` | DateTime         | Дата и время выполнения задачи             |
| `is_completed` | Boolean          | Статус выполнения (по умолчанию — `False`) |
| `user_id`      | Integer (FK)     | Ссылка на владельца задачи (`User.id`)     |

> **Примечание**:  
> - `due_datetime` — обязательное поле (NOT NULL), так как задачи привязаны к дате/времени.  
> - Все задачи автоматически привязаны к пользователю через внешний ключ `user_id`.

---

## 3. Общая структура проекта

### Выбор технологий

| Компонент         | Технология / Фреймворк | Обоснование |
|-------------------|------------------------|-------------|
| **Backend**       | Python + FastAPI       | Современный, асинхронный, автоматическая документация (Swagger UI) |
| **База данных**   | PostgreSQL + SQLAlchemy ORM | Надёжная реляционная СУБД с поддержкой временных типов |
| **Frontend**      | React + Vite           | Популярный SPA-фреймворк, подходит для календарных интерфейсов |
| **Аутентификация**| JWT (JSON Web Tokens)  | Простая, stateless аутентификация |
| **Миграции**      | Alembic                | Управление изменениями схемы БД |
| **Развёртывание** | Docker + docker-compose| Для локального запуска и будущего деплоя |

---

Структура данных 

```text
task_tracker/
├── backend/
│ ├── app/
│ │ ├── main.py # точка входа FastAPI
│ │ ├── models/ # SQLAlchemy модели
│ │ ├── schemas/ # Pydantic схемы
│ │ ├── crud/ # операции с БД
│ │ ├── auth/ # логика аутентификации
│ │ └── database.py # подключение к БД
│ ├── requirements.txt
│ └── alembic/ # миграции БД
│
├── frontend/
│ ├── public/
│ ├── src/
│ │ ├── components/ # календарь, формы и т.д.
│ │ ├── services/ # API-клиент
│ │ └── App.jsx
│ └── package.json
│
└── docker-compose.yml # (опционально)

```
---

## 4. Логика авторизации и работы с задачами

### Аутентификация

#### Регистрация

- **Запрос**: `POST /auth/register`  
- **Тело запроса**:

```json
{
    "username": "john_doe",
    "email": "john@example.com", 
    "password": "secret123"
}
```
### Сервер хэширует пароль (например, через bcrypt) и сохраняет в БД.

#### Вход

- **Запрос**: `POST /auth/login`
- **Тело запроса**:

```json
{
    "username": "john_doe",
    "password": "secret123"
}
```
#### При успехе возвращается JWT-токен:

```json
{
    "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "token_type": "bearer"
}
```
### Защита эндпоинтов
- Все эндпоинты для задач требуют заголовок:

```text
Authorization: Bearer <access_token>
```
- Сервер декодирует токен → извлекает user_id → фильтрует задачи только по этому ID.

### Работа с задачами
#### Создание задачи
- **Метод**: `POST /tasks/`

- **Тело**:

```json
{
    "title": "Подготовить презентацию",
    "description": "К 18:00 понедельника", 
    "due_datetime": "2025-10-20T15:00:00"
}

```
### Получение задач

- **Все задачи**: `GET /tasks/`
- **Задачи за период**: `GET /tasks/?start=2025-10-01&end=2025-10-31`

### Обновление и удаление
- **Обновление задачи**: `PUT /tasks/{id}`

- **Удаление задачи**: `DELETE /tasks/{id}`

### Все операции проверяют, что задача принадлежит текущему пользователю.

---

## 5. Пример API (REST)

###
| Метод       | Путь                     | Описание                           | Аутентификация |
|-------------|--------------------------|------------------------------------|----------------|
| **POST**    | `/auth/register`         | Регистрация нового пользователя   | ❌             |
| **POST**    | `/auth/login`            | Получение JWT-токена              | ❌             |
| **POST**    | `/tasks/`                | Создать новую задачу              | ✅             |
| **GET**     | `/tasks/`                | Получить все задачи пользователя  | ✅             |
| **GET**     | `/tasks/?start=…&end=…`  | Получить задачи за период         | ✅             |
| **PUT**     | `/tasks/{id}`            | Обновить задачу                   | ✅             |
| **DELETE**  | `/tasks/{id}`            | Удалить задачу                    | ✅             |

Все ответы в формате JSON. 

---

## 6. Пример таблиц в БД (PostgreSQL)
```sql
sql
-- Таблица пользователей
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password_hash TEXT NOT NULL
);

-- Таблица задач
CREATE TABLE tasks (
    id SERIAL PRIMARY KEY,
    title VARCHAR(100) NOT NULL,
    description TEXT,
    due_datetime TIMESTAMP NOT NULL,
    is_completed BOOLEAN DEFAULT FALSE,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE
);
```

---

## 7. Дополнительные соображения
Валидация:
- Все входные данные проверяются через Pydantic (на бэкенде) и на фронтенде.

Безопасность:
- Пароли хэшируются с помощью bcrypt,
- JWT подписываются секретным ключом,
- В продакшене — обязательное использование HTTPS.

Масштабируемость:
- Категории задач
- Приоритеты,
- Повторяющиеся события,
- Напоминания.
  
Тестирование:
- Написать unit-тесты с использованием pytest для:
- Аутентификации,
- CRUD-операций,
- Валидации данных.
## Заключение
Проект реализует минимально жизнеспособный продукт (MVP) таск-трекера с календарём, соответствующий требованиям ТЗ. Архитектура разделена на фронтенд и бэкенд, обеспечивает безопасность, изоляцию данных пользователей и удобный интерфейс для работы с задачами.
